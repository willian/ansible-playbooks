---
- name: Ensure apt cache is up to date
  sudo: true
  shell: apt-get update

- name: Ensure apt packages are up to date
  sudo: true
  shell: apt-get upgrade -y

- name: Ensure basic packages are installed and up to date
  sudo: true
  shell: apt-get install -y {{item}}
  with_items:
    - python-apt
    - python-software-properties
    - ack-grep
    - vim
    - git

- name: Ensure ntp is at the latest version
  sudo: true
  apt: pkg=ntp state=latest update_cache=yes
  notify:
    - restart ntp

- name: Copy your SSH files
  copy: src={{lookup('env', 'HOME')}}/.ssh/
        dest={{ansible_env.HOME}}/.ssh/

- name: Update vimfiles from GitHub
  git: repo=git@github.com:willian/vimfiles.git
       dest=/home/vagrant/github/vimfiles
       force=yes
       update=yes

- name: Install vimfiles
  shell: cd /home/vagrant/github/vimfiles && ./install.sh

- name: Update vagrant-config from GitHub
  git: repo=git@github.com:willian/vagrant-config.git
       dest=/home/vagrant/github/vagrant-config
       force=yes
       update=yes

- name: Install vagrant-config
  shell: cd /home/vagrant/github/vagrant-config && ./install.sh
